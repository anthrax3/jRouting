function jRinit(){jR.async(),$.fn.jRouting=function(t){if(jR.hashtags||!jR.isModernBrowser)return this;var r=$.fn.jquery.replace(/\./g,'').parseInt();if(r>=300&&t===!0)throw Error('$(selector).jRouting() doesn\'t work in jQuery +3. Instead of this use jR.clientside(selector).');var n=function(t){t.preventDefault(),jR.redirect($(this).attr('href'))};return t?$(document).on('click',this.selector,n):this.filter('a').bind('click',n),this},$(document).ready(function(){jR.async(),jR.hashtags?jR.url=location.hash||JRFU.path(JRFU.prepareUrl(location.pathname)):jR.url=JRFU.path(JRFU.prepareUrl(location.pathname)),setTimeout(function(){jR.isReady=!0,jR.location(jR.url)},5),$(window).on('hashchange',function(){jR.isReady&&jR.hashtags&&jR.location(JRFU.path(location.hash))}),$(window).on('popstate',function(){if(jR.isReady&&!jR.hashtags){var t=JRFU.path(location.pathname);jR.url!==t&&jR.location(t)}})})}var JRFU={},jR={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v3.0.0',cache:{},routes:[],history:[],errors:[],global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:!!history.pushState,hashtags:!1,count:0};window.jR||(window.jR=jR),window.jRouting||(window.jRouting=jR),window.JRFU||(window.JRFU=JRFU),window.NAVIGATION||(window.NAVIGATION=jR),jR.remove=function(t){for(var r=this,n=[],i=0,e=r.routes.length;i<e;i++)r.routes[i].id!==t&&n.push(r.routes[i]);return r.routes=n,r},jR.on=function(t,r){return ON(t,r),self},jR.emit=function(){EMIT.apply(window,arguments)},jR.route=function(t,r,n,i){var e;if(r instanceof Array){var e=n;n=r,r=e}'function'==typeof n&&(e=i,i=n,n=e);var o=this,a=t.count('/')+(t.indexOf('*')===-1?0:10),u=o._route(t.trim()),s=[];if('string'==typeof n&&(n=n.split(',')),t.indexOf('{')!==-1){a-=100;for(var l=0;l<u.length;l++)'{'===u[l].substring(0,1)&&s.push(l);a-=s.length}return o.routes.remove(t),o.routes.push({id:t,url:u,fn:r,priority:a,params:s,middleware:n||null,init:i,count:0,pending:!1}),o.routes.sort(function(t,r){return t.priority>r.priority?-1:t.priority<r.priority?1:0}),o},jR.middleware=function(t,r){var n=this;return n.middlewares[t]=r,n},jR.refresh=function(){var t=this;return t.location(t.url,!0)},jR.reload=function(){return jR.refresh()},jR.async=function(){if(window.jRoute&&window.jRoute.length){for(;;){var t=window.jRoute.shift();if(!t)break;t()}jR.is404&&jR.location(jR.url)}},jR._route=function(t){47===t.charCodeAt(0)&&(t=t.substring(1)),47===t.charCodeAt(t.length-1)&&(t=t.substring(0,t.length-1));var r=t.split('/');return 1!==r.length||r[0]||(r[0]='/'),r},jR._route_param=function(t,r){var n=[];if(!r||!t)return n;var i=r.params.length;if(i)for(var e=0;e<i;e++){var o=t[r.params[e]];n.push('/'===o?'':o)}return n},jR._route_compare=function(t,r){var n=t.length,i=1===n&&'/'===t[0];if(r.length!==n)return!1;for(var e=0;e<n;e++){var o=r[e];if(!o)return!1;if(i||123!==o.charCodeAt(0)){if('*'===o)return!0;if(t[e]!==o)return!1}}return!0},jR.location=function(t,r){if(jR.isReady){var n=t.indexOf('?');n!==-1&&(t=t.substring(0,n)),t=JRFU.prepareUrl(t),t=JRFU.path(t);var i=this,e=i._route(t),o=[],a=!0,u=[];u.push.apply(u,e);for(var s=0,l=e.length;s<l;s++)e[s]=e[s].toLowerCase();i.isRefresh=r||!1,i.count++,!r&&i.url.length&&i.history[i.history.length-1]!==i.url&&(i.history.push(i.url),i.history.length>i.LIMIT_HISTORY&&i.history.shift());for(var l=i.routes.length,s=0;s<l;s++){var c=i.routes[s];if(i._route_compare(e,c.url)&&(c.url.indexOf('*')===-1&&(a=!1),!(c.once&&c.count>0))){c.count++,o.push(c);break}}var h=!1,f=[];i.url.length&&(i.cache[i.url]=i.repository),i.url=t,i.repository=i.cache[t],i.repository||(i.repository={}),i._params(),i.params=i._route_param(u,c),i.is404=!1,i.emit('location',t),l=o.length;for(var s=0;s<l;s++){var c=o[s];if(!c.pending)if(c.middleware&&c.middleware.length)!function(t){for(var r=t.middleware.length,n=[],e=0;e<r;e++)!function(t,r){n.push(function(n){r.call(i,n,t)})}(t,jR.middlewares[t.middleware[e]]);return t.init?(t.pending=!0,t.init(function(){n.middleware(function(){!err&&t.fn.apply(i,i.params),t.pending=!1})}),void(t.init=null)):(t.pending=!0,void n.middleware(function(r){!r&&t.fn.apply(i,i.params),t.pending=!1}))}(c);else{if(!c.init){c.fn.apply(i,i.params);continue}c.pending=!0,function(t){t.init(function(){t.fn.apply(i,i.params),t.pending=!1})}(c),c.init=null}}h&&i.status(500,f),i.is404=!0,a&&i.status(404,new Error('Route not found.'))}},jR.prev=function(){return this.history[this.history.length-1]},jR.back=function(){var t=this,r=t.history.pop()||'/';return t.url='',t.redirect(r,!0),t},jR.status=function(t,r){var n=this;return n.emit('status',t||404,r),n},jR.redirect=window.REDIRECT=function(t,r){var n=jR;return 35===t.charCodeAt(0)?(location.hash=t,n.model=r||null,n.location(t,!1),n):n.isModernBrowser?(history.pushState(null,null,t),n.model=r||null,n.location(t,!1),n):(location.href=t,!1)},jR._params=function(){for(var t=this,r={},n=location.href.slice(location.href.indexOf('?')+1).split('&'),i=0;i<n.length;i++){var e=n[i].split('=');if(2===e.length){var o=decodeURIComponent(e[0]),a=decodeURIComponent(e[1]),u=r[o]instanceof Array;r[o]&&!u&&(r[o]=[r[o]]),u?r[o].push(a):r[o]=a}}return t.query=r,t},jR.path=JRFU.path=function(t,r){if('#'===t.substring(0,1))return t;r||(r='/');var n=t.indexOf('?'),i='';n!==-1&&(i=t.substring(n),t=t.substring(0,n));var e=t.length,o=t.substring(e-1,e);return o!==r&&(t+=r),t+i},JRFU.prepareUrl=function(t){return'#'===t.substring(0,1)?t:(index=t.indexOf('#'),index!==-1?t.substring(0,index):t)},Array.prototype.middleware||(Array.prototype.middleware=function(t){var r=this,n=r.shift();return void 0===n?(t&&t(),r):(n(function(n){n instanceof Error||n===!1?t&&t(n===!1||n):setTimeout(function(){r.middleware(t)},1)}),r)}),String.prototype.count||(String.prototype.count=function(t){var r=0,n=0;do r=this.indexOf(t,r+t.length),r>0&&n++;while(r>0);return n}),jR.clientside=function(t){return $(document).on('click',t,function(t){t.preventDefault();var r=$(this),n=r.attr('href')||r.attr('data-jrouting')||r.attr('data-jr');'javascript:void(0)'!==n&&'#'!==n&&jR.redirect(n)}),jRouting},window.jQuery?jRinit():jR.init=setInterval(function(){window.jQuery&&(clearInterval(jR.init),jRinit())},100),setTimeout(jR.async,500),setTimeout(jR.async,1e3),setTimeout(jR.async,2e3),setTimeout(jR.async,3e3),setTimeout(jR.async,5e3),window.ROUTE=function(t,r,n,i){return jR.route(t,r,n,i)};