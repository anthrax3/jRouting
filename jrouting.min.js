function jRinit(){jRouting.async(),$.fn.jRouting=function(t){if(jRouting.hashtags||!jRouting.isModernBrowser)return this;var n=$.fn.jquery.replace(/\./g,'').parseInt();if(n>=300&&t===!0)throw Error('$(selector).jRouting() doesn\'t work in jQuery +3. Instead of this use jRouting.clientside(selector).');var r=function(t){t.preventDefault(),jRouting.redirect($(this).attr('href'))};return t?($(document).on('click',this.selector,r),this):(this.filter('a').bind('click',r),this)},$(document).ready(function(){jRouting.async(),jRouting.hashtags?jRouting.url=location.hash||JRFU.path(JRFU.prepareUrl(location.pathname)):jRouting.url=JRFU.path(JRFU.prepareUrl(location.pathname)),jRouting.events.ready?(jRouting.emit('ready',jRouting.url),jRouting.emit('load',jRouting.url)):setTimeout(function(){jRouting.isReady=!0,jRouting.location(jRouting.url),jRouting.emit('ready',jRouting.url),jRouting.emit('load',jRouting.url)},5),$(window).on('hashchange',function(){jRouting.isReady&&jRouting.hashtags&&jRouting.location(JRFU.path(location.hash))}),$(window).on('popstate',function(){if(jRouting.isReady&&!jRouting.hashtags){var t=JRFU.path(location.pathname);jRouting.url!==t&&jRouting.location(t)}})})}var JRFU={},jRouting={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v1.4.0',cache:{},routes:[],history:[],errors:[],events:{},eventsOnce:{},global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:'undefined'!=typeof history.pushState,hashtags:!1,count:0};window.jRouting||(window.jRouting=jRouting),window.JRFU||(window.JRFU=JRFU),jRouting.on=function(t,n){var r=this,i=r.events[t];return i?(i.push(n),r):(r.events[t]=[n],r)},jRouting.once=function(t,n){var r=this,i=r.eventsOnce[t];return i?(i.push(n),r):(r.eventsOnce[t]=[n],r)},jRouting.emit=function(t){var n=this,r=n.events[t]||[],i=n.eventsOnce[t]||[],e=r.length,o=i.length;if(!e&&!o)return n;for(var u=[],a=arguments.length,s=1;s<a;s++)u.push(arguments[s]);if(e>0)for(var s=0;s<e;s++)r[s].apply(n,u);if(o){for(var s=0;s<e;s++)i[s].apply(n,u);delete n.eventsOnce[t]}},jRouting.route=function(t,n,r,i){var e;if(n instanceof Array){var e=r;r=n,n=e}'function'==typeof r&&(e=i,i=r,r=e);var o=this,u=t.count('/')+(t.indexOf('*')===-1?0:10),a=o._route(t.trim()),s=[];if('string'==typeof r&&(r=r.split(',')),t.indexOf('{')!==-1){u-=100;for(var l=0;l<a.length;l++)'{'===a[l].substring(0,1)&&s.push(l);u-=s.length}return o.routes.push({url:a,fn:n,priority:u,params:s,middleware:r||null,init:i,count:0,pending:!1}),o.routes.sort(function(t,n){return t.priority>n.priority?-1:t.priority<n.priority?1:0}),o},jRouting.middleware=function(t,n){var r=this;return r.middlewares[t]=n,r},jRouting.refresh=function(){var t=this;return t.location(t.url,!0)},jRouting.reload=function(){return jRouting.refresh()},jRouting.async=function(){if(window.jRoute&&window.jRoute.length){for(;;){var t=window.jRoute.shift();if(!t)break;t()}jRouting.is404&&jRouting.location(jRouting.url)}},jRouting._route=function(t){'/'===t.charIndex(0)&&(t=t.substring(1)),'/'===t.charIndex(t.length-1)&&(t=t.substring(0,t.length-1));var n=t.split('/');return 1!==n.length||n[0]||(n[0]='/'),n},jRouting._route_param=function(t,n){var r=[];if(!n||!t)return r;var i=n.params.length;if(!i)return r;for(var e=0;e<i;e++){var o=t[n.params[e]];r.push('/'===o?'':o)}return r},jRouting._route_compare=function(t,n){var r=t.length,i=1===r&&'/'===t[0];if(n.length!==r)return!1;for(var e=0;e<r;e++){var o=n[e];if('undefined'==typeof o)return!1;if(i||'{'!==o.charIndex(0)){if('*'===o)return!0;if(t[e]!==o)return!1}}return!0},jRouting.location=function(t,n){if(jRouting.isReady){var r=t.indexOf('?');r!==-1&&(t=t.substring(0,r)),t=JRFU.prepareUrl(t),t=JRFU.path(t);var i=this,e=i._route(t),o=[],u=!0,a=[];a.push.apply(a,e);for(var s=0,l=e.length;s<l;s++)e[s]=e[s].toLowerCase();i.isRefresh=n||!1,i.count++,n||i.url.length&&i.history[i.history.length-1]!==i.url&&(i.history.push(i.url),i.history.length>i.LIMIT_HISTORY&&i.history.shift());for(var l=i.routes.length,s=0;s<l;s++){var g=i.routes[s];if(i._route_compare(e,g.url)&&(g.url.indexOf('*')===-1&&(u=!1),!(g.once&&g.count>0))){g.count++,o.push(g);break}}var c=!1,f=[];i.url.length&&(i.cache[i.url]=i.repository),i.url=t,i.repository=i.cache[t],i.repository||(i.repository={}),i._params(),i.params=i._route_param(a,g),i.is404=!1,i.emit('location',t),l=o.length;for(var s=0;s<l;s++){var g=o[s];if(!g.pending)if(g.middleware&&g.middleware.length)!function(t){for(var n=t.middleware.length,r=[],e=0;e<n;e++)!function(t,n){r.push(function(r){n.call(i,r,t)})}(t,jRouting.middlewares[t.middleware[e]]);return t.init?(t.pending=!0,t.init(function(){r.middleware(function(){err||t.fn.apply(i,i.params),t.pending=!1})}),void(t.init=null)):(t.pending=!0,void r.middleware(function(n){n||t.fn.apply(i,i.params),t.pending=!1}))}(g);else{if(!g.init){g.fn.apply(i,i.params);continue}g.pending=!0,function(t){t.init(function(){t.fn.apply(i,i.params),t.pending=!1})}(g),g.init=null}}c&&i.status(500,f),i.is404=!0,u&&i.status(404,new Error('Route not found.'))}},jRouting.prev=function(){var t=this;return t.history[t.history.length-1]},jRouting.back=function(){var t=this,n=t.history.pop()||'/';return t.url='',t.redirect(n,!0),t},jRouting.status=function(t,n){var r=this;return r.emit('status',t||404,n),r},jRouting.redirect=function(t,n){var r=this;return'#'===t.substring(0,1)?(location.hash=t,r.model=n||null,r.location(t,!1),r):r.isModernBrowser?(history.pushState(null,null,t),r.model=n||null,r.location(t,!1),r):(location.href=t,!1)},jRouting._params=function(){for(var t=this,n={},r=location.href.slice(location.href.indexOf('?')+1).split('&'),i=0;i<r.length;i++){var e=r[i].split('=');if(2===e.length){var o=decodeURIComponent(e[0]),u=decodeURIComponent(e[1]),a=n[o]instanceof Array;'undefined'==typeof n[o]||a||(n[o]=[n[o]]),a?n[o].push(u):n[o]=u}}return t.query=n,t},JRFU.path=function(t,n){if('#'===t.substring(0,1))return t;'undefined'==typeof n&&(n='/');var r=t.indexOf('?'),i='';r!==-1&&(i=t.substring(r),t=t.substring(0,r));var e=t.charIndex(t.length-1);return e!==n&&(t+=n),t+i},String.prototype.count||(String.prototype.count=function(t){var n=0,r=0;do n=this.indexOf(t,n+t.length),n>0&&r++;while(n>0);return r}),String.prototype.charIndex||(String.prototype.charIndex=function(t){return this.toString().substring(t,t+1)}),jRouting.path=JRFU.path=function(t,n){if('#'===t.substring(0,1))return t;'undefined'==typeof n&&(n='/');var r=t.indexOf('?'),i='';r!==-1&&(i=t.substring(r),t=t.substring(0,r));var e=t.charIndex(t.length-1);return e!==n&&(t+=n),t+i},JRFU.prepareUrl=function(t){return'#'===t.substring(0,1)?t:(index=t.indexOf('#'),index!==-1?t.substring(0,index):t)},Array.prototype.middleware||(Array.prototype.middleware=function(t){var n=this,r=n.shift();return void 0===r?(t&&t(),n):(r(function(r){return r instanceof Error||r===!1?void(t&&t(r===!1||r)):void setTimeout(function(){n.middleware(t)},1)}),n)}),jRouting.on('error',function(t,n,r){var i=this;i.errors.push({error:t,url:n,name:r,date:new Date}),i.errors.length>i.LIMIT_HISTORY_ERROR&&i.errors.shift()}),jRouting.clientside=function(t){return $(document).on('click',t,function(t){t.preventDefault(),jRouting.redirect($(this).attr('href'))}),jRouting},window.jQuery?jRinit():jRouting.init=setInterval(function(){window.jQuery&&(clearInterval(jRouting.init),jRinit())},100),window.jR=jRouting,setTimeout(jRouting.async,500),setTimeout(jRouting.async,1e3),setTimeout(jRouting.async,2e3),setTimeout(jRouting.async,3e3),setTimeout(jRouting.async,5e3);